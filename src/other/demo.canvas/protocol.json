{
  "name": "Demo Protocol",
  "version": "1.0.0",
  "networkCanvasVersion": "~4.0.0",
  "variableRegistry": {
    "node": {
      "person": {
        "label": "Person",
        "color": "coral",
        "displayVariable": "nickname",
        "variables": {
          "name": {
            "label": "Name",
            "description": "Human readable description",
            "type": "text",
            "validation": {
              "required": true,
              "minLength": 1,
              "maxLength": 24
            }
          },
          "age": {
            "label": "Age",
            "description": "Human readable description",
            "type": "number",
            "validation": {
              "required": true,
              "minValue": 16,
              "maxValue": 100
            }
          },
          "nickname": {
            "label": "Nickname",
            "description": "Human readable description",
            "type": "text",
            "validation": {
              "required": true,
              "minLength": 1,
              "maxLength": 8
            }
          },
          "special_category": {
            "label": "Special category",
            "description": "Human readable description",
            "type": "enumerable",
            "options": [46]
          },
          "some_options": {
            "label": "Some possible options",
            "description": "Human readable description",
            "type": "options",
            "options": [46],
            "validation": {
              "max": 1
            }
          },
          "close_friend": {
            "label": "Close Friend",
            "description": "Human readable description",
            "type": "boolean"
          },
          "support_friend": {
            "label": "Support Friend",
            "description": "Human readable description",
            "type": "boolean"
          },
          "advice_friend": {
            "label": "Advice Friend",
            "description": "Human readable description",
            "type": "boolean"
          },
          "has_given_advice": {
            "label": "Has given advice?",
            "description": "Human readable description",
            "type": "boolean"
          }
        }
      },
      "venue": {
        "label": "Venue",
        "color": "kiwi",
        "variables": {
          "name": {
            "label": "Name",
            "description": "Human readable description",
            "type": "text",
            "validation": {
              "required": true,
              "minLength": 1,
              "maxLength": 24
            }
          },
          "location": {
            "label": "Location",
            "description": "Human readable description",
            "type": "coordinates"
          }
        }
      }
    },
    "edge": {
      "friend": {
        "label": "Friend",
        "color": "mustard",
        "variables": {
          "contact_freq": {
            "label": "contact_freq",
            "description": "Contact frequency.",
            "type": "ordinal",
            "values": {
              "Very Often": 4,
              "Often": 3,
              "Sometimes": 2,
              "Rarely": 1,
              "Never": -1
            }
          }
        }
      },
      "professional": {
        "label": "Professional",
        "color": "kiwi",
        "variables": {
        }
      }
    }
  },
  "externalData": {
    "previousInterview": {
      "nodes": [
        {
          "uid": "previous_1",
          "type": "person",
          "name": "Anita",
          "nickname": "Annie",
          "age": "23"
        },
        {
          "uid": "previous_2",
          "type": "person",
          "name": "Barry",
          "nickname": "Baz",
          "age": "23"
        },
        {
          "uid": "previous_3",
          "type": "person",
          "name": "Carlito",
          "nickname": "Carl",
          "age": "23"
        },
        {
          "uid": "previous_4",
          "type": "person",
          "name": "Dee",
          "nickname": "Dee",
          "age": "23"
        },
        {
          "uid": "previous_5",
          "type": "person",
          "name": "Eugine",
          "nickname": "Eu",
          "age": "23"
        }
      ]
    },
    "venue_list": {
      "nodes": [
        {
          "type": "venue",
          "name": "My Home"
        },
        {
          "type": "venue",
          "name": "My Workplace"
        },
        {
          "type": "venue",
          "name": "Local Bar"
        }
      ]
    },
    "HIVServices": {
      "nodes": [
        {
            "Main/Parent Organization": "About My Health",
            "Subsidiary/Program/Project": "",
            "Abbreviated Name": "About My Health",
            "name": "About My Health",
            "Standard Word Abbreviations": "",
            "Geocoded Address": "55 E Washington St, Chicago, Illinois, 60602",
            "Latitude": 41.882945,
            "Longitude": -87.62572,
            "Raw Address": "55 E Washington St, Chicago, Illinois 60602, United States"
        },
        {
            "Main/Parent Organization": "Access Community Health Network",
            "Subsidiary/Program/Project": "Access Anixter Center",
            "Abbreviated Name": "Access - Anixter",
            "name": "Access - Anixter",
            "Standard Word Abbreviations": "",
            "Geocoded Address": "2020 N Clybourn Ave, Chicago, Illinois, 60614",
            "Latitude": 41.91837,
            "Longitude": -87.660281,
            "Raw Address": "2020 N Clybourn Ave, Chicago, Illinois 60614, United States"
        },
        {
            "Main/Parent Organization": "Access Community Health Network",
            "Subsidiary/Program/Project": "ACCESS Ashland Family Health Center",
            "Abbreviated Name": "Access - Ashland Family Health Center",
            "name": "Access - Ashland Family Health Center",
            "Standard Word Abbreviations": "",
            "Geocoded Address": "5159 S Ashland Ave, Chicago, IL 60609",
            "Latitude": 41.799756,
            "Longitude": -87.66443,
            "Raw Address": "5159 S Ashland Ave, Chicago, Illinois, 60609"
        },
        {
            "Main/Parent Organization": "Access Community Health Network",
            "Subsidiary/Program/Project": "ACCESS Auburn-Gresham Family Health Center",
            "Abbreviated Name": "Access - Auburn-Gresham Family Health Center",
            "name": "Access - Auburn-Gresham Family Health Center",
            "Standard Word Abbreviations": "",
            "Geocoded Address": "8234 S Ashland Ave, Chicago, IL 60620",
            "Latitude": 41.743832,
            "Longitude": -87.663648,
            "Raw Address": "8234 S Ashland Ave, Chicago, Illinois, 60620"
        },
        {
            "Main/Parent Organization": "Access Community Health Network",
            "Subsidiary/Program/Project": "ACCESS Booker Family Health Center",
            "Abbreviated Name": "Access - Booker Family Health Center",
            "name": "Access - Booker Family Health Center",
            "Standard Word Abbreviations": "",
            "Geocoded Address": "654 E 47th St, Chicago, IL 60653",
            "Latitude": 41.809683,
            "Longitude": -87.609344,
            "Raw Address": "654 E 47th St, Chicago, Illinois, 60653"
        },
        {
            "Main/Parent Organization": "Access Community Health Network",
            "Subsidiary/Program/Project": "ACCESS Brandon Family Health Center",
            "Abbreviated Name": "Access - Brandon Family Health Center",
            "name": "Access - Brandon Family Health Center",
            "Standard Word Abbreviations": "",
            "Geocoded Address": "8300 S Brandon Ave, Chicago, IL 60617",
            "Latitude": 41.74453,
            "Longitude": -87.547014,
            "Raw Address": "8300 S Brandon Ave, Chicago, Illinois, 60617"
        },
        {
            "Main/Parent Organization": "Access Community Health Network",
            "Subsidiary/Program/Project": "ACCESS Cabrini Family Health Center",
            "Abbreviated Name": "Access - Cabrini Family Health Center",
            "name": "Access - Cabrini Family Health Center",
            "Standard Word Abbreviations": "",
            "Geocoded Address": "3450 S Archer Ave, Chicago, IL 60608",
            "Latitude": 41.831331,
            "Longitude": -87.676624,
            "Raw Address": "3450 S Archer Ave, Chicago, Illinois, 60608"
        },
        {
            "Main/Parent Organization": "Access Community Health Network",
            "Subsidiary/Program/Project": "ACCESS Centro Medico",
            "Abbreviated Name": "Access - Centro Medico",
            "name": "Access - Centro Medico",
            "Standard Word Abbreviations": "",
            "Geocoded Address": "3700 W 26th St, Chicago, IL 60623",
            "Latitude": 41.844509,
            "Longitude": -87.717409,
            "Raw Address": "3700 W 26th St, Chicago, Illinois, 60623"
        },
        {
            "Main/Parent Organization": "Access Community Health Network",
            "Subsidiary/Program/Project": "ACCESS Centro Medico San Rafael",
            "Abbreviated Name": "Access - Centro Medico San Rafael",
            "name": "Access - Centro Medico San Rafael",
            "Standard Word Abbreviations": "",
            "Geocoded Address": "3204 W 26th St, Chicago, IL 60623",
            "Latitude": 41.844713,
            "Longitude": -87.705448,
            "Raw Address": "3204 W 26th St, Chicago, Illinois, 60623"
        },
        {
            "Main/Parent Organization": "Access Community Health Network",
            "Subsidiary/Program/Project": "ACCESS Doctors Medical Center",
            "Abbreviated Name": "Access - Doctors Medical Center",
            "name": "Access - Doctors Medical Center",
            "Standard Word Abbreviations": "",
            "Geocoded Address": "6240 W 55th St, Chicago, IL 60638",
            "Latitude": 41.792657,
            "Longitude": -87.778601,
            "Raw Address": "6240 W 55th St, Chicago, Illinois, 60638"
        },
        {
            "Main/Parent Organization": "Access Community Health Network",
            "Subsidiary/Program/Project": "ACCESS Evanston-Rogers Park Family Health Center",
            "Abbreviated Name": "Access - Evanston-Rogers Park Family Health Center",
            "name": "Access - Evanston-Rogers Park Family Health Center",
            "Standard Word Abbreviations": "",
            "Geocoded Address": "1555 Howard St, Chicago, IL 60626",
            "Latitude": 42.019113,
            "Longitude": -87.670241,
            "Raw Address": "1555 W Howard St, Chicago, Illinois, 60626"
        },
        {
            "Main/Parent Organization": "Access Community Health Network",
            "Subsidiary/Program/Project": "ACCESS at Gary Comer Youth Center",
            "Abbreviated Name": "Access - Gary Comer Youth Center",
            "name": "Access - Gary Comer Youth Center",
            "Standard Word Abbreviations": "",
            "Geocoded Address": "7200 S Ingleside Ave, Chicago, IL 60619",
            "Latitude": 41.764069,
            "Longitude": -87.602436,
            "Raw Address": "7200 S Ingleside Ave, Chicago, Illinois, 60619"
        },
        {
            "Main/Parent Organization": "Access Community Health Network",
            "Subsidiary/Program/Project": "Grand Boulevard Health and Specialty Center",
            "Abbreviated Name": "Access - Grand Boulevard",
            "name": "Access - Grand Boulevard",
            "Standard Word Abbreviations": "Blvd",
            "Geocoded Address": "5401 S Wentworth Ave, Chicago, Illinois, 60609",
            "Latitude": 41.795962,
            "Longitude": -87.629572,
            "Raw Address": "5401 S Wentworth Ave, Chicago, Illinois 60609, United States"
        },
        {
            "Main/Parent Organization": "Access Community Health Network",
            "Subsidiary/Program/Project": "ACCESS Humboldt Park Family Health Center",
            "Abbreviated Name": "Access - Humboldt Park Family Health Center",
            "name": "Access - Humboldt Park Family Health Center",
            "Standard Word Abbreviations": "",
            "Geocoded Address": "3202 W North Ave, Chicago, IL 60647",
            "Latitude": 41.910444,
            "Longitude": -87.707085,
            "Raw Address": "3202 W North Ave, Chicago, Illinois, 60647"
        },
        {
            "Main/Parent Organization": "Access Community Health Network",
            "Subsidiary/Program/Project": "ACCESS at the Illinois Eye Institute",
            "Abbreviated Name": "Access - Illinois Eye Institute",
            "name": "Access - Illinois Eye Institute",
            "Standard Word Abbreviations": "",
            "Geocoded Address": "3241 S Michigan Ave, Chicago, IL 60616",
            "Latitude": 41.835265,
            "Longitude": -87.622279,
            "Raw Address": "3241 S Michigan Ave, Chicago, Illinois, 60616"
        },
        {
            "Main/Parent Organization": "Access Community Health Network",
            "Subsidiary/Program/Project": "ACCESS Kedzie Family Health Center",
            "Abbreviated Name": "Access - Kedzie Family Health Center",
            "name": "Access - Kedzie Family Health Center",
            "Standard Word Abbreviations": "",
            "Geocoded Address": "3213 W 47th Pl, Chicago, IL 60632",
            "Latitude": 41.806249,
            "Longitude": -87.704915,
            "Raw Address": "3213 W 47th Place, Chicago, Illinois, 60632"
        },
        {
            "Main/Parent Organization": "Access Community Health Network",
            "Subsidiary/Program/Project": "Servicios Medicos La Villita",
            "Abbreviated Name": "Access - La Villita",
            "name": "Access - La Villita",
            "Standard Word Abbreviations": "",
            "Geocoded Address": "3303 W 26th St, Chicago, Illinois, 60623",
            "Latitude": 41.843835,
            "Longitude": -87.707797,
            "Raw Address": "3303 W 26th St, Chicago, Illinois 60623, United States"
        },
        {
            "Main/Parent Organization": "Access Community Health Network",
            "Subsidiary/Program/Project": "ACCESS Madison Family Health Center",
            "Abbreviated Name": "Access - Madison Family Health Center",
            "name": "Access - Madison Family Health Center",
            "Standard Word Abbreviations": "",
            "Geocoded Address": "3800 W Madison St, Chicago, IL 60624",
            "Latitude": 41.881126,
            "Longitude": -87.721142,
            "Raw Address": "3800 W Madison Ave, Chicago, Illinois, 60624"
        }
      ]
    },
    "schoolPupils": {
      "nodes": [
        {
          "type": "person",
          "name": "Anita",
          "nickname": "Annie",
          "age": "23"
        },
        {
          "type": "person",
          "name": "Barry",
          "nickname": "Baz",
          "age": "23"
        },
        {
          "type": "person",
          "name": "Carlito",
          "nickname": "Carl",
          "age": "23"
        },
        {
          "type": "person",
          "name": "Dee",
          "nickname": "Dee",
          "age": "23"
        },
        {
          "type": "person",
          "name": "Eugine",
          "nickname": "Eu",
          "age": "23"
        }
      ]
    }
  },
  "forms": {
    "person": {
      "title": "Add A Person",
      "entity": "node",
      "type": "person",
      "fields": [
        {
          "variable": "name",
          "component": "TextInput"
        },
        {
          "variable": "nickname",
          "component": "TextInput"
        },
        {
          "variable": "age",
          "component": "TextInput"
        },
        {
          "variable": "timeCreated",
          "component": "hidden",
          "value": "return Date.now().toString();"
        }
      ]
    },
    "myCustomForm": {
      "title": "Add A Person",
      "entity": "node",
      "type": "person",
      "fields": [
        {
          "variable": "name",
          "component": "TextInput"
        },
        {
          "variable": "nickname",
          "component": "TextInput"
        },
        {
          "variable": "age",
          "component": "TextInput"
        },
        {
          "variable": "timeCreated",
          "component": "hidden",
          "value": "return Date.now().toString();"
        }
      ]
    }
  },
  "stages": [
    {
      "id": "namegenroster1",
      "type": "NameGeneratorAutoComplete",
      "label": "NG Classmates",
      "prompts": [
        {
          "id": "7cl",
          "text": "Which classmates would you also think of as friends?",
          "additionalAttributes": {
            "special_category": 46,
            "close_friend": true
          },
          "dataSource": "schoolPupils",
          "displayLabel": "nickname",
          "displayProperties": ["name", "age"],
          "autoCompleteOptions": {
            "fuzzyness": 0.4,
            "matchProperties": ["nickname", "name"]
          },
          "subject": {
            "entity": "node",
            "type": "person"
          }
        },
        {
          "id": "7su",
          "text": "Which of these venues have you visited in the previous 6 months?",
          "additionalAttributes": {
            "primary_venue": true
          },
          "dataSource": "HIVServices",
          "displayLabel": "Abbreviated Name",
          "displayProperties": ["Geocoded Address", "Subsidiary/Program/Project"],
          "autoCompleteOptions": {
            "fuzzyness": 0.5,
            "matchProperties": ["Abbreviated Name", "Subsidiary/Program/Project", "Geocoded Address"]
          },
          "subject": {
            "entity": "node",
            "type": "location"
          }
        }
      ]
    },
    {
      "id": "namegen1",
      "type": "NameGenerator",
      "label": "NG Closeness",
      "form": "myCustomForm",
      "subject": {
        "entity": "node",
        "type": "person"
      },
      "panels": [
        "existing",
        "external"
      ],
      "prompts": [
        {
          "id": "6cl",
          "text": "Within the past 6 months, who have you felt particularly close to, or discussed important personal matters with?",
          "additionalAttributes": {
            "special_category": 46,
            "close_friend": true
          }
        },
        {
          "id": "6su",
          "text": "Within the past 6 months, who has been supportive?",
          "additionalAttributes": {
            "support_friend": true
          }
        },
        {
          "id": "2we",
          "text": "Within the past 2 weeks, who has provided advice?",
          "additionalAttributes": {
            "advice_friend": true
          }
        }
      ]
    },
    {
      "id": "sociogram",
      "type": "Sociogram",
      "label": "Sociogram",
      "prompts": [
        {
          "id": "closeness1",
          "text": "Position the nodes amongst the concentric circles. Place people you are closer to towards the middle",
          "subject": {
            "entity": "node",
            "type": "person"
          },
          "filter": "return operator.or([\nselect.edge({ type: 'friend' }),\nselect.alter({ type: 'person', attribute: 'age', operator: 'GREATER_THAN', value: 29 })]);",
          "layout": {
            "layoutVariable": "closenessLayout",
            "allowPositioning": true
          },
          "edges": {
            "display": ["friends", "professional"],
            "create": "friends"
          },
          "highlight": {
            "variable": "has_given_advice",
            "value": true,
            "allowHighlighting": true
          },
          "disable": "return operator.or([\nselect.edge({ type: 'friend' }),\nselect.alter({ type: 'person', attribute: 'age', operator: 'LESS_THAN', value: 29 })]);",
          "nodeBinSortOrder": {
            "nickname": "DESC"
          },
          "background": {
            "concentricCircles": 4,
            "skewedTowardCenter": true
          }
        }
      ]
    }
  ]
}
